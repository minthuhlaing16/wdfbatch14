<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Navigator</title>
  </head>
  <body>
    <button type="button" onclick="clicktoclipboard('hello world')">Hello world copied</button>
    <button type="button" onclick="clicktoclipboard('john doe')">john doe copied</button>
    <button type="button" onclick="clicktoclipboard('susan')">susan copied</button>
    <button type="button" onclick="clicktoclipboard('alice')">alice copied</button>
    <script>
      // console.log(navigator.userAgent); // ? Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36
      // console.log(navigator);
      // console.log(navigator.platform); // ? Linux x86_64
      // console.log(navigator.onLine); // ? true

      // ==> Detect Browser (Method 1)
      function detectbrowser() {
        const useragent = navigator.userAgent;
        // console.log(useragent);
        if (useragent.includes("Firefox")) {
          return "Mozilla Firefox..";
        } else if (useragent.includes("OPR")) {
          return "Opera..";
        } else if (useragent.includes("Edg")) {
          return "Microsoft Edge";
        } else if (useragent.includes("Safari") && !useragent.includes("Chrome")) {
          return "Safari..";
        } else if (useragent.includes("Chrome") && !useragent.includes("OPR")) {
          return "Google Chrome";
        } else {
          return "Other Browser...";
        }
      }
      console.log("Browser: ", detectbrowser());

      // .test() ==> regular expression pattern
      let pattern = /apple/;
      console.log(pattern.test("I like apple.")); // true ==> apple par lar sit tar
      console.log(pattern.test("I like apples.")); // true;
      console.log(pattern.test("I like Apple.")); // false;
      console.log(pattern.test("I like APPLE.")); // fales;

      let string = /^Hello/;
      console.log(string.test("hi hello.")); // false ==> hello nae ma sa loa
      console.log(string.test("hello hi")); // false
      console.log(string.test("Hello hi")); // true
      console.log(string.test("HELLO hi")); // false

      // Detect os (Method 2)
      function detectos() {
        let useragent = navigator.userAgent;
        if (useragent.includes("Windows")) return "OS: Windows";
        if (useragent.includes("Linux") && !useragent.includes("Android")) return "OS: Linux";
        if (useragent.includes("Mac") && !useragent.includes("iPhone")) return "OS: MacOS";
        if (useragent.includes("Android")) return "OS: MacOS";
        if (/iPhone|iPad/.test(useragent)) return "iOS";
        return "Unknown OS.";
      }
      console.log(detectos());
      // Detect Device
      function ismobiledevice() {
        userAgent = navigator.userAgent;
        return /Android|iPhone|iPad|Windows Phone/.test(userAgent);
      }
      console.log("Device Type: ", ismobiledevice() ? "Mobile" : "Desktop");

      // Clipboard (readText(),writeText())
      // console.log(navigator.clipboard);
      // ? Method 1
      // navigator.clipboard.writeText("hello world my name is clipboard.")
      // .then(() =>console.log("Copied to clipboard!"))
      // .catch(err => console.error("Failed Copied: " , err));

      // ? Method 2
      // function clicktoclipboard(){
      //    navigator.clipboard.writeText("hello John Doe")
      //   .then(() =>console.log("Copied to clipboard!"))
      //   .catch(err => console.error("Failed Copied: " , err));
      // }
      // clicktoclipboard()

      // Method 3
       function clicktoclipboard(value){
         navigator.clipboard.writeText(`${value}`)
        .then(() =>console.log("Copied to clipboard!"))
        .catch(err => console.error("Failed Copied: " , err));
      }

      // navigator.clipboard.readText()
      // .then(text => console.log("Clipboard result: ",text))
      // .catch(err => console.error("Failed: ",err));

      // ==> Battery
      navigator.getBattery()
      .then((battery)=>{
        console.log(`Battery Level: ${battery.level*100}%`); // 0 to 1
        console.log(`Charging: ${battery.charging}`); // true
        console.log(`Time to full: ${battery.chargingTime} seconds.`);
        console.log(`Time to empty: ${battery.dischargingTime} seconds.`);

        battery.addEventListener("levelchange",()=>{
          console.log(`Battery Level: ${battery.level * 100}%`);
        })

        battery.addEventListener("chargingchange",()=>{
          console.log(`Charging status: ${battery.charging}`)
        })
      })
      .catch(err => console.error("Failed: ", err));

      // Geo location
      console.log(navigator.geolocation);
      // console.log(navigator.geolocation.getCurrentPosition());

      // check permission status
      navigator.permissions.query({name:"geolocation"})
      // .then(result => console.log("Geolocation permission result: ",result))
      .then(result => {
      console.log("Geolocation permission result: ",result.state)
      navigator.geolocation.getCurrentPosition(position=>{

        console.log(position);
        console.log(position.coords.latitude);
        console.log(position.coords.longitude);
        
      },err=>console.log("Failed: ",err.message)); 
      }) // granted,prompt,denied . Note: go to chrome setting ==> privacy and security ==> site settings ==> route ==> choose permission
      .catch(err => console.log(err));
    </script>
  </body>
</html>
